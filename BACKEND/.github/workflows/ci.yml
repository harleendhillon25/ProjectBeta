# THIS IS JUST SAMPLE DATA TO STOP IT SAYING THERE IS AN ERROR


name: Risk_Radar CI/CD # This is the name of the github action

on: # When to trigger
  push:
  schedule: #Triggered via a schedule
    - cron: "0 */2 * * *" #This will ruin every 2 hours
  workflow_dispatch:

permissions:
  contents: read # We only need to read what the repo provides

jobs:
  refresh_ip_reputation:
    runs-on: ubuntu-latest #This is the runner

    steps:
      - name: Checkout repo #Just the name of the step
        uses: actions/checkout@v4 #Preexisting github action, to checkout the git

      - name: Use Node.js
        uses: actions/setup-node@v4 #Again, tells the github action to use a preexisting node simulator
        with:
          node-version: "22"

      - name: Cache Node modules
        uses: actions/cache@v4
        with:
          path: ~/.npm
          key: ${{ runner.os }}-node-${{ hashFiles('package-lock.json') }}  #This is reading and copying our json-lock package

      - name: Install dependencies
        run: npm ci # ci will install the exact version on the package lock
        
      - name: Refresh IP reputation via AbuseIPDB
        env:
          ABUSE_KEY: ${{ secrets.ABUSE_KEY }}
          DB_URL: ${{ secrets.DB_URL }}
        
        run: kk
